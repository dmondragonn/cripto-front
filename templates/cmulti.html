<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>Cifrado multiplicativo</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link href="../static/css/bootstrap.min.css" rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <link href="../static/css/templatemo-topic-listing.css" rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>

  <body id="top">
    <main>
      <nav class="navbar navbar-expand-lg">
        <div class="container">
          <a class="navbar-brand" href="{{ url_for('index') }}">
            <i class="bi bi-person-lock"></i>
            <span>CryptoPlayground</span>
          </a>

          <div class="d-lg-none ms-auto me-4">
            <a href="#top" class="navbar-icon bi-person smoothscroll"></a>
          </div>

          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-lg-5 me-lg-auto">
              <li class="nav-item">
                <a class="nav-link click-scroll" href="/">Inicio</a
                >
              </li>

              <li class="nav-item">
                <a class="nav-link click-scroll" href="/"
                  >Explorar cifrados</a
                >
              </li>

              <li class="nav-item">
                <a class="nav-link click-scroll" href="/ #section_3"
                  >Cómo funciona</a
                >
              </li>

              <li class="nav-item">
                <a class="nav-link click-scroll" href="{{ url_for('contact') }}">Nosotros</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

        <header
          class="site-header d-flex flex-column justify-content-center align-items-center"
        >
          <div class="container">
            <div class="row justify-content-center align-items-center">
              <div class="col-lg-5 col-12 mb-5">
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a href="{{ url_for('index') }}">Inicio</a>

                    <li class="breadcrumb-item active" aria-current="page">
                      Cifrado multiplicativo
                    </li>
                  </ol>
                </nav>

                <h2 class="text-white">Cifrado multiplicativo<br /></h2>

                <div class="d-flex align-items-center mt-5">
                  <a
                    href="#playground"
                    class="btn custom-btn custom-border-btn smoothscroll me-4"
                    >Playground!</a
                  >
                </div>
              </div>

              <div class="col-lg-5 col-12">
                <div class="topics-detail-block bg-white shadow-lg">
                  <img
                    src="../static/images/topics/multi.jpeg"
                    class="topics-detail-block-image img-fluid"
                  />
                </div>
              </div>
            </div>
          </div>
        </header>
      
      
      <div class="row gy-4 justify-content-center">
        {% if texto_cifrado %}
        <div class="col-lg-12 col-12">
          <div class="alert alert-success">
            <strong>Mensaje cifrado:</strong> {{ texto_cifrado }}
          </div>
        </div>
        {% endif %}
      </div>

      <section class="topics-detail-section section-padding" id="biblio">
        <div class="container">
          <div class="row">
            <div class="col-lg-8 col-12 m-auto">
              <h3 class="mb-4">Cifrado Multiplicativo</h3>
            
              <p>El cifrado multiplicativo es un tipo de cifrado por sustitución basado en la aritmética modular. Se basa en la idea de que cada letra en el alfabeto se representa como un número (A=0, B=1, ..., Z=25) y se cifra multiplicándola por una clave <em>k</em> que debe ser coprima con 26 (el número de letras en el alfabeto inglés).</p>

                <p>Dado un mensaje en texto plano representado como números <em>x</em>, el cifrado se realiza mediante la ecuación:</p>

                <p><strong>C = (k * x) mod 26</strong></p>

                <p>Donde:</p>
                <p>- <em>C</em> es el valor cifrado de la letra.</p>
                <p>- <em>k</em> es la clave de cifrado (debe cumplir <em>gcd(k, 26) = 1</em> para que exista un inverso).</p>
                <p>- <em>x</em> es la posición de la letra en el alfabeto.</p>

                <p>Para descifrar, se necesita el inverso modular de <em>k</em>, denotado como <em>k⁻¹</em>, tal que:</p>

                <p><strong>(k * k⁻¹) mod 26 = 1</strong></p>

                <p>El texto en claro se recupera con:</p>

                <p><strong>x = (k⁻¹ * C) mod 26</strong></p>

                <p>El código en Python que implementa este cifrado sigue estos pasos:</p>
                <p>1. Verifica que la clave sea coprima con 26.</p>
                <p>2. Convierte cada letra del mensaje en su valor numérico.</p>
                <p>3. Aplica la función de cifrado <strong>C = (k * x) mod 26</strong>.</p>
                <p>4. Para descifrar, calcula el inverso modular de <em>k</em> y aplica <strong>x = (k⁻¹ * C) mod 26</strong>.</p>
                
                <p>El cifrado multiplicativo, aunque simple, es una versión especial del <strong>cifrado afín</strong>, que utiliza una transformación lineal más general de la forma:</p>

                <p><strong>C = (k * x + b) mod 26</strong></p>

                <p>donde <em>b</em> introduce un desplazamiento adicional. El cifrado afín es una extensión del cifrado de César, que se puede ver como un caso especial con <em>k = 1</em>.</p>

            </div>
          </div>
        </div>
      </section>

      <section class="section-padding section-bg" id="playground">
        <div class="container">
            <div class="row justify-content-center text-center">
                <div class="col-lg-12 col-12">
                    <h3 class="mb-4 pb-2">Cifrado Multiplicativo</h3>
                </div>
                <div class="col-lg-6 col-12">
                  <form id="cipherForm" class="custom-form contact-form">
                    <div class="row gy-4 justify-content-center">
                        <div class="col-lg-12 col-12">
                            <div class="btn-group" role="group">
                                <input type="radio" class="btn-check" name="action" id="encryptRadio" value="encrypt" checked>
                                <label class="btn btn-outline-primary rounded-pill px-4 mx-2 custom-radio-btn" for="encryptRadio">Encriptar</label>
                
                                <input type="radio" class="btn-check" name="action" id="decryptRadio" value="decrypt">
                                <label class="btn btn-outline-primary rounded-pill px-4 mx-2 custom-radio-btn" for="decryptRadio">Desencriptar</label>
                            </div>
                        </div>
                
                        <div class="col-lg-12 col-12">
                            <div class="form-floating">
                                <textarea class="form-control" id="message" placeholder="Escribe aquí..." required></textarea>
                                <label for="message">Texto cifrar</label>
                            </div>
                        </div>
                
                        <div class="col-lg-6 col-12">
                            <div class="form-floating">
                                <select id="key" class="form-control" required>
                                    <option value="1">1</option>
                                    <option value="3">3</option>
                                    <option value="5">5</option>
                                    <option value="7">7</option>
                                    <option value="9">9</option>
                                    <option value="11">11</option>
                                    <option value="15">15</option>
                                    <option value="17">17</option>
                                    <option value="19">19</option>
                                    <option value="21">21</option>
                                    <option value="23">23</option>
                                    <option value="25">25</option>
                                </select>
                                <label for="key1">Clave (n coprimo con 26)</label>
                            </div>
                        </div>
                
                        <div class="col-lg-4 col-12">
                            <button id="procesarBtn" type="submit" class="form-control btn btn-primary">Procesar</button>
                        </div>
                      </div>
                    </form>
                    <div id="resultado" class="mt-4 p-3 bg-light" style="border-radius: 35px; display: none;">
                        <h5>Texto cifrado:</h5>
                        <p id="resultText" class="fw-bold text-primary"></p>
                        <button id="copyBtn" class="btn btn-outline-secondary btn-sm"  style="border-radius: 35px;" disabled>Copiar</button>
                        <span id="copyMessage" class="text-success ms-2" style="display: none;">¡Copiado!</span>
                      </div>
                </div>
            </div>
        </div>
    </section>

    </main>

    <script src="../static/js/jquery.min.js"></script>
    <script src="../static/js/bootstrap.bundle.min.js"></script>
    <script src="../static/js/jquery.sticky.js"></script>
    <script src="../static/js/custom.js"></script>
  </body>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
        document.getElementById("cipherForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            
            const message = document.getElementById("message").value;
            const key = document.getElementById("key").value;
            const action = document.querySelector('input[name="action"]:checked').value;
            const resultElement = document.getElementById("resultText");

            try {
                const response = await fetch("/process-multiplicative", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ 
                        message: message,
                        key: key,
                        action: action
                    })
                });

                const data = await response.json();
                
                if (!response.ok) throw new Error(data.error || "Error del servidor");
                
                resultElement.textContent = data.result;
                resultElement.classList.remove("text-danger");
                resultElement.classList.add("text-primary");
            } catch (error) {
                resultElement.textContent = `Error: ${error.message}`;
                resultElement.classList.remove("text-primary");
                resultElement.classList.add("text-danger");
                console.error("Error:", error);
            }
        });
    });

    document.addEventListener("DOMContentLoaded", function () {
        const resultadoDiv = document.getElementById("resultado");
        const procesarBtn = document.getElementById("procesarBtn");

        // Ocultar el div al cargar la página
        resultadoDiv.style.display = "none";

        procesarBtn.addEventListener("click", function () {
            // Aquí podrías agregar la lógica para enviar los datos al backend
            // Por ahora, solo mostramos el div de resultado
            resultadoDiv.style.display = "block";
        });
    });
</script>

<script>
    // Este script adicional no modifica nada de tu código original,
    // solo agrega la funcionalidad para copiar el texto cifrado.
    document.addEventListener("DOMContentLoaded", () => {
        const copyBtn = document.getElementById("copyBtn");
        const resultText = document.getElementById("resultText");
        const copyMessage = document.getElementById("copyMessage");
  
        if (!copyBtn || !resultText || !copyMessage) {
            console.error("Elementos para la funcionalidad de copiar no encontrados.");
            return;
        }
  
        // Observar cambios en el contenido de resultText para habilitar o deshabilitar el botón
        const observer = new MutationObserver(() => {
            copyBtn.disabled = resultText.textContent.trim() === "";
        });
        observer.observe(resultText, { childList: true, subtree: true });
  
        // Agregar la funcionalidad de copiar al portapapeles al hacer clic
        copyBtn.addEventListener("click", () => {
            navigator.clipboard.writeText(resultText.textContent)
                .then(() => {
                    // Mostrar mensaje de confirmación durante 2 segundos
                    copyMessage.style.display = "inline";
                    setTimeout(() => {
                        copyMessage.style.display = "none";
                    }, 2000);
                })
                .catch(err => console.error("Error al copiar: ", err));
        });
    });
  </script>

</html>